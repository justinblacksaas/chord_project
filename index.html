<!DOCTYPE html>
<html>
<head>
  <title>Chord Loop Web App</title>
  <link rel="stylesheet" type="text/css" href="style.css"> <!-- Link to your CSS file -->
</head>
<body>
  <h1>Chord Loop Web App</h1>

  <div id="chord-input">
  <div class="panel">
    <div class="keys">
      <div class="key" data-key="A">
        <kbd>A</kbd>
      </div>
      <div class="key" data-key="Bb">
        <kbd>Bb</kbd>
      </div>
      <div class="key" data-key="B">
        <kbd>B</kbd>
      </div>
      <div class="key" data-key="C">
        <kbd>C</kbd>
      </div>
      <div class="key" data-key="Db">
        <kbd>Db</kbd>
      </div>
      <div class="key" data-key="D">
        <kbd>D</kbd>
      </div>
      <div class="key" data-key="Eb">
        <kbd>Eb</kbd>
      </div>
      <div class="key" data-key="E">
        <kbd>E</kbd>
      </div>
      <div class="key" data-key="F">
        <kbd>F</kbd>
      </div>
      <div class="key" data-key="Gb">
        <kbd>Gb</kbd>
      </div>
      <div class="key" data-key="G">
        <kbd>G</kbd>
      </div>
      <div class="key" data-key="Ab">
        <kbd>Ab</kbd>
      </div>
    </div>
  </div>
  <div class="panel">
    <div class="keys">
      <div class="key" data-key="Am">
        <kbd>Am</kbd>
      </div>
      <div class="key" data-key="Bbm">
        <kbd>Bbm</kbd>
      </div>
      <div class="key" data-key="Bm">
        <kbd>Bm</kbd>
      </div>
      <div class="key" data-key="Cm">
        <kbd>Cm</kbd>
      </div>
      <div class="key" data-key="Dbm">
        <kbd>Dbm</kbd>
      </div>
      <div class="key" data-key="Dm">
        <kbd>Dm</kbd>
      </div>
      <div class="key" data-key="Ebm">
        <kbd>Ebm</kbd>
      </div>
      <div class="key" data-key="Em">
        <kbd>Em</kbd>
      </div>
      <div class="key" data-key="Fm">
        <kbd>Fm</kbd>
      </div>
      <div class="key" data-key="Gbm">
        <kbd>Gbm</kbd>
      </div>
      <div class="key" data-key="Gm">
        <kbd>Gm</kbd>
      </div>
      <div class="key" data-key="Abm">
        <kbd>Abm</kbd>
      </div>
    </div>
  </div>
  <div class="panel">
    <div class="keys">
      <div class="key" data-key="A7">
        <kbd>A7</kbd>
      </div>
      <div class="key" data-key="Bb7">
        <kbd>Bb7</kbd>
      </div>
      <div class="key" data-key="B7">
        <kbd>B7</kbd>
      </div>
      <div class="key" data-key="C7">
        <kbd>C7</kbd>
      </div>
      <div class="key" data-key="Db7">
        <kbd>Db7</kbd>
      </div>
      <div class="key" data-key="D7">
        <kbd>D7</kbd>
      </div>
      <div class="key" data-key="Eb7">
        <kbd>Eb7</kbd>
      </div>
      <div class="key" data-key="E7">
        <kbd>E7</kbd>
      </div>
      <div class="key" data-key="F7">
        <kbd>F7</kbd>
      </div>
      <div class="key" data-key="Gb7">
        <kbd>Gb7</kbd>
      </div>
      <div class="key" data-key="G7">
        <kbd>G7</kbd>
      </div>
      <div class="key" data-key="Ab7">
        <kbd>Ab7</kbd>
      </div>
    </div>
  </div>
  </div>    
  
  <div id="chord-list">
    <h2>Chord List:</h2>
    <ul id="chords"></ul>
  </div>
  
    <label for="duration">Chord Duration (in milliseconds):</label>
    <input type="number" id="duration" value="500" min="100" step="100">
    
    
  <div id="controls">
    <button id="play">Play</button>
    <button id="pause">Pause</button>
    <button id="stop">Stop</button>
    <button id="clear">Clear Chords</button>
  </div>

<!-- next step: create placeholders for minor and major 7 chord. remove text in keys -->
  <audio src="sounds/A major.wav" id="audio-A"></audio>
  <audio src="sounds/Bb major.wav" id="audio-Bb"></audio>
  <audio src="sounds/B major.wav" id="audio-B"></audio>
  <audio src="sounds/C major.wav" id="audio-C"></audio>
  <audio src="sounds/Db major.wav" id="audio-Db"></audio>
  <audio src="sounds/D major.wav" id="audio-D"></audio>
  <audio src="sounds/Eb major.wav" id="audio-Eb"></audio>
  <audio src="sounds/E major.wav" id="audio-E"></audio>
  <audio src="sounds/F major.wav" id="audio-F"></audio>
  <audio src="sounds/Gb major.wav" id="audio-Gb"></audio>
  <audio src="sounds/G major.wav" id="audio-G"></audio>
  <audio src="sounds/Ab major.wav" id="audio-Ab"></audio>

  <audio src="sounds/A minor.wav" id="audio-Am"></audio>
  <audio src="sounds/Bb minor.wav" id="audio-Bbm"></audio>
  <audio src="sounds/B minor.wav" id="audio-Bm"></audio>
  <audio src="sounds/C minor.wav" id="audio-Cm"></audio>
  <audio src="sounds/Db minor.wav" id="audio-Dbm"></audio>
  <audio src="sounds/D minor.wav" id="audio-Dm"></audio>
  <audio src="sounds/Eb minor.wav" id="audio-Ebm"></audio>
  <audio src="sounds/E minor.wav" id="audio-Em"></audio>
  <audio src="sounds/F minor.wav" id="audio-Fm"></audio>
  <audio src="sounds/Gb minor.wav" id="audio-Gbm"></audio>
  <audio src="sounds/G minor.wav" id="audio-Gm"></audio>
  <audio src="sounds/Ab minor.wav" id="audio-Abm"></audio>

  <audio src="sounds/A major 7.wav" id="audio-A7"></audio>
  <audio src="sounds/Bb major 7.wav" id="audio-Bb7"></audio>
  <audio src="sounds/B major 7.wav" id="audio-B7"></audio>
  <audio src="sounds/C major 7.wav" id="audio-C7"></audio>
  <audio src="sounds/Db major 7.wav" id="audio-Db7"></audio>
  <audio src="sounds/D major 7.wav" id="audio-D7"></audio>
  <audio src="sounds/Eb major 7.wav" id="audio-Eb7"></audio>
  <audio src="sounds/E major 7.wav" id="audio-E7"></audio>
  <audio src="sounds/F major 7.wav" id="audio-F7"></audio>
  <audio src="sounds/Gb major 7.wav" id="audio-Gb7"></audio>
  <audio src="sounds/G major 7.wav" id="audio-G7"></audio>
  <audio src="sounds/Ab major 7.wav" id="audio-Ab7"></audio>  

  <script>
    // research data structures to organize chords based on key
    // use the flex panel lesson for reference
    // place circle of fifths on page and write guide of ways to use
    const panels = document.querySelectorAll('.panel');
    const keys = document.querySelectorAll('.key');
    const audioElements = document.querySelectorAll('audio');
    let currentChordIndex = 0;
    let loopInterval;
    const loopChords = [];

    function addChord(event) {
      const chordText = event.currentTarget.textContent.trim();
      const chordList = document.getElementById('chords');
      const existingChords = chordList.lastElementChild;

      if (existingChords) {
        existingChords.textContent += `, ${chordText}`;
      } else {
        const newChord = document.createElement('li');
        newChord.textContent = chordText;
        chordList.appendChild(newChord);
      }

      loopChords.push(chordText);
    }

    function playChord(event) {
      const chordText = event.currentTarget.textContent.trim();
      const key = event.currentTarget.getAttribute('data-key');
      audioElements.forEach(audio => {
        if (audio.id === `audio-${key}`) {
          audio.currentTime = 0;
          audio.play();
        }
      });
    }

    function startLoop() {
      const durationInput = document.getElementById('duration');
      const duration = parseInt(durationInput.value);

      loopInterval = setInterval(() => {
        const chordText = loopChords[currentChordIndex];
        const chordKeys = Array.from(keys);
        const key = chordKeys.find(key => key.textContent.trim() === chordText).getAttribute('data-key');
        audioElements.forEach(audio => {
          if (audio.id === `audio-${key}`) {
            audio.currentTime = 0;
            audio.play();
          }
        });

        currentChordIndex++;
        if (currentChordIndex >= loopChords.length) {
          currentChordIndex = 0;
        }
      }, duration);

      durationInput.disabled = true;
    }

    function stopLoop() {
      clearInterval(loopInterval);
      currentChordIndex = 0;
      const durationInput = document.getElementById('duration');
      durationInput.disabled = false;
    }

    function clearChords() {
      const chordList = document.getElementById('chords');
      chordList.innerHTML = '';
      loopChords.length = 0;
    }

    document.getElementById('play').addEventListener('click', startLoop);
    document.getElementById('stop').addEventListener('click', stopLoop);
    document.getElementById('clear').addEventListener('click', clearChords);

    keys.forEach(key => key.addEventListener('click', addChord));
    keys.forEach(key => key.addEventListener('click', playChord));
  </script>
  </body>
</html>
